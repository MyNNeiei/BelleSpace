{% extends 'layout.html' %}
{% load humanize %}

{% block page_title %}การจองทั้งหมด{% endblock %}

{% block header %}
การจองทั้งหมด 
Total {{num}} Appointments
{% endblock %}

{% block content %}
<div class="overflow-x-auto pt-24 bg-[#D18F90] h-screen">
    <table class="w-3/4  mx-auto">
        <thead class="bg-[#74342B] text-[#EDDCC2]">
            <tr>
                <th class="py-2 px-4 border-b">ID</th>
                <th class="py-2 px-4 border-b">Full Name</th>
                <th class="py-2 px-4 border-b">Position</th>
                <th class="py-2 px-4 border-b">Appointment Date</th>
                <th class="py-2 px-4 border-b">Category</th>
                <th class="py-2 px-4 border-b">Services</th>
                <th class="py-2 px-4 border-b">Staff</th>
                <th class="py-2 px-4 border-b">Status</th>
            </tr>
        </thead>
        <tbody>
            {% for appointment in appointments %}
            <tr class="{% cycle 'bg-[#EDDCC2]' 'bg-[#FFF1DC]' %}">
                <td class="py-2 px-4 border-b">{{ appointment.id }}</td>
                <td class="py-2 px-4 border-b">{{ appointment.fullname }}</td>
                <td class="py-2 px-4 border-b">{{ appointment.position }}</td>
                <td class="py-2 px-4 border-b">{{ appointment.appointment_date|date:"d / m / Y" }}</td>
                <td class="py-2 px-4 border-b">{{ appointment.category.name }}</td>
                <td class="py-2 px-4 border-b">
                    {% for service in appointment.services %}
                        {{ service.name }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </td>
                <td class="py-2 px-4 border-b">
                    {% for staff in appointment.staff_id.all %}
                        {{ staff.position }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </td>
                <td class="py-2 px-4 border-b">{{ appointment.get_status_display }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7" class="py-4 px-4 text-center">No appointments found</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}